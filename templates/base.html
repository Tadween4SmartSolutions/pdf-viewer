{% extends "base.html" %}

{% block content %}
<div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search PDF files..." onkeyup="searchPDFs()">
    <i class="fas fa-search"></i>
</div>

<div class="pdf-grid" id="pdfGrid">
    {% for pdf in pdf_files %}
    <div class="pdf-card" data-filename="{{ pdf.name }}">
        <div class="pdf-icon">
            <i class="fas fa-file-pdf"></i>
        </div>
        <div class="pdf-info">
            <h3 class="pdf-title">{{ pdf.name }}</h3>
            <p class="pdf-size">{{ pdf.size_mb }} MB</p>
        </div>
        <div class="pdf-actions">
            <a href="{{ url_for('serve_pdf', filename=pdf.name) }}" 
               target="_blank" 
               class="btn btn-primary" 
               title="Open PDF">
                <i class="fas fa-external-link-alt"></i>
            </a>
            <button class="btn btn-secondary preview-btn" 
                    data-filename="{{ pdf.name }}"
                    title="Preview PDF">
                <i class="fas fa-eye"></i>
            </button>
        </div>
    </div>
    {% else %}
    <div class="no-pdfs">
        <i class="fas fa-folder-open fa-3x"></i>
        <h3>No PDF files found</h3>
        <p>Add PDF files to the 'pdfs' folder to get started.</p>
    </div>
    {% endfor %}
</div>

<!-- Preview Modal -->
<div id="previewModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2 id="previewTitle">PDF Preview</h2>
        <div class="preview-container">
            <iframe id="pdfPreview" width="100%" height="600px" frameborder="0"></iframe>
        </div>
        <div class="modal-actions">
            <a id="openPdfLink" href="#" target="_blank" class="btn btn-primary">
                <i class="fas fa-external-link-alt"></i> Open Full PDF
            </a>
            <button class="btn btn-secondary" onclick="closePreview()">Close</button>
        </div>
    </div>
</div>

<!-- Hover Preview Tooltip -->
<div id="hoverPreview" class="hover-preview">
    <div class="preview-header">
        <i class="fas fa-file-pdf"></i>
        <span id="previewFileName">filename.pdf</span>
    </div>
    <div class="preview-content">
        <p>Hover over buttons to see quick preview options</p>
    </div>
</div>
{% endblock %}